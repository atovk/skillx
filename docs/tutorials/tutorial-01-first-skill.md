# 教程 1: 创建你的第一个 Skill

欢迎来到第一个教程！在这个教程中，我们将从头开始创建一个完整的 Claude Code Skill。

## 教程目标

完成本教程后，你将：

- 理解 Skill 的完整开发流程
- 掌握 Frontmatter 的编写
- 学会组织 Skill 内容
- 能够独立创建简单的 Skills

## 我们要创建什么

我们将创建一个 **"代码片段管理器"**（`code-snippet-manager`）Skill，它可以：

1. 帮助用户保存常用的代码片段
2. 按语言和标签组织片段
3. 快速查找和插入片段

## 步骤 1: 规划 Skill

在开始编码之前，先规划你的 Skill：

### 需求分析

**功能**：

- 保存代码片段
- 分类和组织
- 搜索和检索

**输入**：用户的代码片段和元数据
**输出**：保存到文件或检索片段

### 技术考虑

- 需要读写文件 → 使用 `Read` 和 `Write` 工具
- 需要搜索 → 使用 `Grep` 工具
- 数据格式 → JSON 易于管理

## 步骤 2: 创建文件结构

首先创建目录：

```bash
mkdir -p code-snippet-manager
cd code-snippet-manager
touch SKILL.md
```

## 步骤 3: 编写 Frontmatter

打开 `SKILL.md`，添加元数据：

```yaml
---
name: code-snippet-manager
description: 管理和重用代码片段，支持保存、搜索和组织片段
allowed-tools:
  - Read
  - Write
  - Grep
  - Glob
---
```

**说明**：

- `name`: 技能标识符，使用小写和连字符
- `description`: 清楚说明功能（50-100 字符）
- `allowed-tools`: 声明需要的工具

## 步骤 4: 编写内容

### 标题和概述

```markdown
# 代码片段管理器

你是代码片段管理专家，帮助用户保存、组织和使用代码片段。
```

### 工作流程

```markdown
## 工作流程

1. **选择操作**：询问用户想做什么（保存、搜索、列出）
2. **执行操作**：根据用户选择执行相应操作
3. **确认结果**：显示操作结果
```

### 操作详情

```markdown
## 操作类型

### 保存片段
1. 询问代码片段
2. 询问描述和标签
3. 询问编程语言
4. 保存到 snippets.json

### 搜索片段
1. 询问搜索关键词
2. 在 snippets.json 中搜索
3. 显示匹配结果

### 列出所有片段
1. 读取 snippets.json
2. 按语言分类显示
```

### 数据格式

```markdown
## 数据格式

片段存储在 `snippets.json` 中：

   ```json
   {
   "snippets": [
      {
         "id": "1",
         "code": "代码内容",
         "description": "描述",
         "language": "javascript",
         "tags": ["数组", "排序"],
         "created_at": "2025-01-11"
      }
   ]
   }
   ```

```

## 步骤 5: 添加使用说明

```markdown
## 使用示例

### 保存片段

**用户**: code-snippet-manager

**Assistant**: 你好！我是代码片段管理器。你想做什么？

1. 保存新的代码片段
2. 搜索已有片段
3. 列出所有片段

**用户**: 选择 1

**Assistant**: 请提供以下信息：
1. 代码片段
2. 描述
3. 编程语言
4. 标签（用逗号分隔）

[收集信息后保存]
```

## 步骤 6: 完整的 SKILL.md

将以上内容组合起来，完整的 `SKILL.md` 如下：

```markdown
---
name: code-snippet-manager
description: 管理和重用代码片段，支持保存、搜索和组织片段
allowed-tools:
  - Read
  - Write
  - Grep
  - Glob
---

# 代码片段管理器

你是代码片段管理专家，帮助用户保存、组织和使用代码片段。

## 工作流程

### 1. 询问操作类型

首先询问用户想做什么：

1. **保存新的代码片段** - 将代码保存到片段库
2. **搜索片段** - 根据关键词查找片段
3. **列出所有片段** - 显示所有保存的片段

### 2. 执行相应操作

根据用户选择执行对应的操作流程。

### 3. 显示结果

清晰展示操作结果。

---

## 操作详情

### 保存片段

当用户选择保存片段时：

1. **收集信息**
   - 代码片段内容
   - 片段描述
   - 编程语言
   - 标签（可选，用逗号分隔）

2. **生成 ID**
   - 使用时间戳生成唯一 ID

3. **保存到文件**
   - 读取现有的 `snippets.json`
   - 添加新片段
   - 写回文件

4. **确认**
   - 显示保存的片段信息
   - 确认保存成功

### 搜索片段

当用户选择搜索片段时：

1. **获取关键词**
   - 询问搜索关键词

2. **执行搜索**
   - 使用 Grep 工具在 `snippets.json` 中搜索
   - 匹配代码、描述、标签

3. **显示结果**
   - 列出所有匹配的片段
   - 高亮显示匹配部分

### 列出片段

当用户选择列出片段时：

1. **读取文件**
   - 读取 `snippets.json`

2. **按语言分组**
   - 按编程语言分组显示

3. **格式化输出**
   - 使用表格或列表
   - 包含 ID、描述、语言、标签

---

## 数据格式

片段存储在项目根目录的 `snippets.json` 文件中：

```json
{
  "snippets": [
    {
      "id": "1736610400000",
      "code": "array.sort((a, b) => a - b);",
      "description": "数字数组升序排序",
      "language": "javascript",
      "tags": ["数组", "排序"],
      "created_at": "2025-01-11T10:00:00Z"
    }
  ]
}
```

---

## 错误处理

### 文件不存在

如果 `snippets.json` 不存在：

```markdown
片段库文件不存在，正在创建新文件...
```

然后创建包含空数组的新文件。

### 无效输入

如果用户提供的信息不完整：

```markdown
信息不完整，请提供：
- 代码片段（必需）
- 描述（必需）
- 编程语言（必需）
```

---

## 输出格式

### 保存确认

```markdown
✅ 片段已保存

**ID**: 1736610400000
**语言**: JavaScript
**描述**: 数字数组升序排序
**标签**: 数组, 排序

片段已添加到片段库，可以使用 "搜索" 功能找到它。
```

### 搜索结果

```markdown
🔍 搜索结果：排序

找到 2 个片段：

### 1. 数字数组升序排序 (JavaScript)
```javascript
array.sort((a, b) => a - b);
```

标签：数组, 排序

### 2. 对象数组排序 (JavaScript)

```javascript
array.sort((a, b) => a.name.localeCompare(b.name));
```

标签：数组, 排序, 对象

```
```

---

## 开始使用

请问你想做什么？

1. 保存新的代码片段
2. 搜索已有片段
3. 列出所有片段

请输入 1、2 或 3。

```

## 步骤 7: 测试 Skill

### 在 Claude Code 中测试

1. **启动 Claude Code**
   ```bash
   claude
   ```

1. **运行 Skill**

   ```
   code-snippet-manager
   ```

2. **测试各种操作**
   - 保存一个片段
   - 搜索刚才保存的片段
   - 列出所有片段

### 测试清单

- [ ] 可以成功保存片段
- [ ] 可以搜索到保存的片段
- [ ] 可以列出所有片段
- [ ] 文件不存在时自动创建
- [ ] 输出格式清晰易读
- [ ] 错误处理友好

## 步骤 8: 改进和优化

测试完成后，考虑以下改进：

### 可能的改进

1. **添加编辑功能**
   - 允许修改现有片段
   - 更新描述或标签

2. **添加删除功能**
   - 删除不需要的片段

3. **添加导入导出**
   - 导出片段到其他格式
   - 从其他工具导入

4. **添加同步功能**
   - 使用 Git 同步片段库

## 常见问题

### Q: 如何修改已保存的片段？

**A**: 当前版本不支持编辑。可以：

1. 手动编辑 `snippets.json` 文件
2. 或删除旧片段，重新保存修改后的版本

### Q: 片段存储在哪里？

**A**: 片段存储在当前工作目录的 `snippets.json` 文件中。

### Q: 可以在不同项目间共享片段吗？

**A**: 可以！将 `snippets.json` 文件复制到其他项目，或者使用符号链接。

## 总结

恭喜你！你已经创建了第一个完整的 Skill。在这个教程中，你学到了：

1. ✅ 如何规划一个 Skill
2. ✅ 如何编写 Frontmatter
3. ✅ 如何组织 Skill 内容
4. ✅ 如何使用工具（Read、Write、Grep）
5. ✅ 如何处理错误
6. ✅ 如何测试 Skill

## 下一步

现在你已经掌握了基础，可以：

1. **练习**：完成 [初级练习 1-3](../../exercises/beginner/)
2. **学习**：阅读 [教程 2：渐进式披露](tutorial-02-progressive-disclosure.md)
3. **探索**：查看 [示例 Skills](../../skills/)

## 参考资源

- [Skill 结构剖析](../02-skill-anatomy.md)
- [最佳实践](../03-best-practices.md)
- [工具限制参考](../reference/tool-restrictions.md)
