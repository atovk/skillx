# 练习 5: 测试你的 Skill

**难度**：⭐⭐ 初级
**预计时间**：30 分钟

## 学习目标

完成这个练习后，你将：

- 知道如何测试 Skill
- 理解常见的测试场景
- 能够调试和修复问题

## 前置知识

- 已完成练习 1-4
- 创建过至少一个 Skill

## 任务描述

选择你之前创建的任何一个 Skill，进行完整的测试和调试。

### 测试流程

1. **功能测试**：验证核心功能
2. **边界测试**：测试边界情况
3. **错误处理**：测试错误场景
4. **用户反馈**：评估输出质量

## 测试清单

### 1. 功能测试

对于你的 Skill，测试：

- [ ] **正常输入**
  - 提供预期的输入，验证输出是否正确
  - 测试多次，确保行为一致

- [ ] **不同类型的输入**
  - 字符串、数字、文件路径等
  - 验证 Skill 能正确处理

- [ ] **输出格式**
  - 输出是否符合预期格式
  - 是否易于理解

### 2. 边界测试

测试极限情况：

- [ ] **空输入**
  - 空字符串、空列表
  - 应该友好提示，不崩溃

- [ ] **非常大的输入**
  - 很长的文本、很大的文件
  - 性能是否可接受

- [ ] **特殊字符**
  - Unicode 字符、表情符号
  - 特殊符号（如 $, #, @）

### 3. 错误处理

测试错误场景：

- [ ] **文件不存在**
  - 提供无效的文件路径
  - 应该给出清晰的错误信息

- [ ] **权限问题**
  - 尝试读取无权限的文件
  - 应该友好地处理

- [ ] **无效输入**
  - 提供错误类型的输入
  - 应该提示用户并提供正确格式示例

### 4. 用户反馈

评估用户体验：

- [ ] **输出清晰度**
  - 输出是否容易理解
  - 是否有足够的上下文

- [ ] **帮助信息**
  - 是否有使用说明
  - 是否有示例

- [ ] **错误信息**
  - 错误信息是否有帮助
  - 是否提供解决方案

## 测试记录表

创建测试记录文档：

```markdown
# Skill 测试记录

**Skill 名称**：[name]
**测试日期**：[date]
**测试者**：[your name]

## 功能测试

| 测试用例 | 输入 | 预期输出 | 实际输出 | 通过 |
|---------|------|---------|---------|------|
| 正常输入 | ... | ... | ... | ✓/✗ |
| 空输入 | ... | ... | ... | ✓/✗ |

## 边界测试

| 测试用例 | 输入 | 预期行为 | 实际行为 | 通过 |
|---------|------|---------|---------|------|
| 大文件 | ... | 不崩溃 | ... | ✓/✗ |

## 错误处理

| 测试用例 | 场景 | 预期 | 实际 | 通过 |
|---------|------|------|------|------|
| 文件不存在 | ... | 友好提示 | ... | ✓/✗ |

## 发现的问题

1. [问题描述]
   - 严重性：高/中/低
   - 复现步骤：...
   - 修复方案：...

## 改进建议

1. [建议内容]
```

## 调试技巧

### 技巧 1: 分步执行

不要一次测试整个 Skill，分步测试：

```markdown
## 测试步骤 1

只测试第一步，验证它工作正常后再继续。
```

### 技巧 2: 添加调试输出

在 Skill 中添加临时调试信息：

```markdown
[调试] 开始处理文件：{filename}
[调试] 读取到 {line_count} 行
```

### 技巧 3: 简化测试

先测试简化版本，再逐步增加复杂度：

```
第 1 版：只处理单个文件
第 2 版：处理多个文件
第 3 版：添加错误处理
```

### 技巧 4: 使用允许的工具

如果 Skill 有问题，先限制工具：

```yaml
allowed-tools:
  - Read  # 只允许读取
```

验证基本功能正常后再添加其他工具。

## 常见问题排查

### 问题 1: Skill 没有响应

**可能原因**：

- Frontmatter 格式错误
- 工具调用没有正确声明

**解决方法**：

1. 检查 YAML 格式
2. 验证 `allowed-tools` 声明

### 问题 2: 输出不符合预期

**可能原因**：

- 指令不够清晰
- 步骤顺序混乱

**解决方法**：

1. 明确每个步骤的目标
2. 使用编号列表组织步骤
3. 添加输出格式要求

### 问题 3: 工具调用失败

**可能原因**：

- 文件路径错误
- 权限不足
- 工具未在 `allowed-tools` 中声明

**解决方法**：

1. 验证文件路径
2. 检查文件权限
3. 确认工具声明

## 示例测试会话

**测试 Skill**: `file-counter` (练习 2)

### 测试 1: 正常输入

**输入**: `src`

**预期**: 统计 src 目录的文件

**实际**:

```markdown
# 文件统计结果
**目录**: src
**总文件数**: 25
...
```

**结果**: ✓ 通过

### 测试 2: 不存在的目录

**输入**: `nonexistent`

**预期**: 友好的错误提示

**实际**:

```markdown
❌ 目录不存在：nonexistent

请检查：
1. 路径是否正确
2. 是否是相对路径
```

**结果**: ✓ 通过

### 测试 3: 空目录

**输入**: `empty-dir`

**预期**: 显示 0 个文件

**实际**:

```markdown
# 文件统计结果
**目录**: empty-dir
**总文件数**: 0
```

**结果**: ✓ 通过

## 验收标准

完成测试后，确认：

- [ ] 所有功能测试通过
- [ ] 边界测试有合理处理
- [ ] 错误场景有友好提示
- [ ] 输出格式清晰一致
- [ ] 完成测试记录文档
- [ ] 修复了发现的问题

## 参考答案

查看 `solutions/beginner/exercise-05.md` 了解完整的测试示例和模板。

## 延伸挑战

1. **自动化测试**
   - 创建测试脚本自动测试 Skill
   - 记录测试结果

2. **性能测试**
   - 测试大文件处理
   - 测量响应时间

3. **用户测试**
   - 让其他人使用你的 Skill
   - 收集反馈并改进

## 相关资源

- [测试 Skills 教程](../../docs/tutorials/tutorial-04-testing-skills.md)
- [最佳实践](../../docs/03-best-practices.md)
- [工具限制参考](../../docs/reference/tool-restrictions.md)

---

恭喜！完成这个练习后，你已经掌握了创建、测试和调试 Skill 的基本技能。准备好进入中级练习了！
