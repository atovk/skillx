# 练习 2: 使用工具读取文件

**难度**：⭐ 初级
**预计时间**：20 分钟

## 学习目标

完成这个练习后，你将：

- 知道如何在 Skill 中使用工具
- 理解 `allowed-tools` 的作用
- 能够创建读取文件的 Skill

## 前置知识

- 已完成练习 1
- 了解 Skill 的基本结构

## 任务描述

创建一个名为 `file-counter` 的 Skill，它会：

1. 询问用户要分析哪个目录
2. 统计该目录中的文件数量
3. 按文件类型分类（如 .js, .py, .md）
4. 展示统计结果

## 要求

### 1. 使用工具

在 Frontmatter 中声明需要的工具：

```yaml
---
name: file-counter
description: 统计目录中的文件数量和类型
allowed-tools:
  - Bash
  - Glob
---
```

### 2. 输出格式

```markdown
# 文件统计结果

**目录**：[目录路径]

**总文件数**：[数量]

## 按类型分类

| 类型 | 数量 |
|------|------|
| .js  | 10   |
| .py  | 5    |
| ...  | ...  |
```

### 3. 错误处理

如果目录不存在或无法访问，应该：

- 友好地提示用户
- 建议解决方案

## 提示

### 提示 1: 可用的工具

- **Bash**: 运行命令行工具
- **Glob**: 查找匹配模式的文件
- **Read**: 读取文件内容
- **Write**: 写入文件
- **Grep**: 搜索文件内容

### 提示 2: 使用 Glob

```markdown
使用 Glob 工具查找文件：
- 查找所有文件：`**/*`
- 查找特定类型：`**/*.js`
```

### 提示 3: 统计方法

可以先使用 Glob 查找所有文件，然后：

1. 收集所有文件扩展名
2. 按扩展名分组计数
3. 格式化输出

### 提示 4: 错误处理

```markdown
在执行操作前，先验证目录是否存在：
1. 尝试列出目录内容
2. 如果失败，提示用户检查路径
3. 建议使用绝对路径或相对路径
```

## 示例输出

**用户输入**：`file-counter`

**Assistant**：

```
请问要分析哪个目录？（可以输入相对路径或绝对路径）

[用户输入：src]

正在分析 src 目录...

# 文件统计结果

**目录**：src

**总文件数**：25

## 按类型分类

| 类型   | 数量 |
|--------|------|
| .js    | 12   |
| .css   | 5    |
| .md    | 3    |
| .json  | 2    |
| 其他   | 3    |
```

## 验收标准

完成练习后，检查：

- [ ] Frontmatter 正确声明 `allowed-tools`
- [ ] 能够询问用户目录路径
- [ ] 正确统计文件数量
- [ ] 按文件类型分类展示
- [ ] 有适当的错误处理
- [ ] 输出格式清晰易读

## 参考答案

完成练习后，可以查看 `solutions/beginner/exercise-02.md` 对比参考答案。

## 延伸挑战

- 添加子目录递归统计
- 统计代码行数（使用 Bash 的 `wc` 命令）
- 生成可视化图表（使用 ASCII 字符）

## 相关资源

- [Skill 结构剖析](../../docs/02-skill-anatomy.md)
- [file-analyzer 示例](../../skills/02-file-operations/file-analyzer/)
